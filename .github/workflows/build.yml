name: AfterGL Library Build

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate-library:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v4

    - name: Install 3D Dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y \
          libglfw3-dev \
          libglm-dev \
          libgl1-mesa-dev \
          libglu1-mesa-dev

    - name: Verify Library Compilation
      run: |
        # Explicitly move into the subfolder
        cd AfterGL

        # Now that we are inside AfterGL, paths are relative to this folder
        g++ -c src/AfterGL.cpp src/glad.c \
          -I include \
          -fPIC

    - name: Success Check
      run: echo "Library validation complete."
