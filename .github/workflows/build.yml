name: AfterGL Library Build

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate-library:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v4

    - name: Install 3D Dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y \
          libglfw3-dev \
          libglm-dev \
          libgl1-mesa-dev \
          libglu1-mesa-dev

    - name: Verify Library Compilation
      run: |
        # Compile AfterGL.cpp and glad.c into object files (-c)
        # This checks for errors without needing a main() function or game file.
        g++ -c AfterGL/src/AfterGL.cpp AfterGL/src/glad.c \
          -I AfterGL/include \
          -fPIC

    - name: Success Check
      run: echo "AfterGL library files compiled successfully."
